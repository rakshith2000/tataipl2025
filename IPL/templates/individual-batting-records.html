{% extends "base.html" %} {% block head %} {{ super() }}
  <meta name="robots" content="noindex,nofollow" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="{{ url_for('static', filename= 'css/bootstrap.min.css') }}" rel="stylesheet" >
   <link href="{{ url_for('static', filename= 'fonts/css/fontawesome.min.css') }}" rel="stylesheet" >
  <link href="{{ url_for('static', filename= 'fonts/css/brands.min.css') }}" rel="stylesheet" />
    <link href="{{ url_for('static', filename= 'fonts/css/solid.min.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename= 'css/global.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename= 'css/index.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename= 'css/live.css') }}" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
   <link href="{{ url_for('static', filename= 'css/flag-icons.css') }}" rel="stylesheet">
    <style>
    body {
        font-family: 'Exo 2', sans-serif;
        background: #081033;
  background-image: url('/static/images/banner_bg.png');
  background-size: 100%;
  background-position: center top -48px;
    }
    .status{
        display: block;
    }
    .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-toggle {
    background-color: #00816a;
    color: white;
    padding: 7px 3px;
    border: 1px solid #ffb09e;
    border-radius: 25px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    min-width: 250px;
    text-align: center;
  }

  .dropdown-menu {
    display: block;
    position: absolute;
    background-color: white;
    min-width: 250px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    border: 1px solid #ffb09e;
    border-radius: 8px;
    margin-top: 8px;
    font-weight: bold;
    z-index: 1;
    overflow-y: auto;
    max-height: 0;
    opacity: 0;
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
  }

  .dropdown-menu a {
    color: #333;
    padding: 5px 10px;
    text-decoration: none;
    display: block;
    border-bottom: 1px solid #eaeaea;
    font-size: 13px;
  }

  .dropdown-menu::-webkit-scrollbar{
    width: 1px;
    height: 5px;
}

.dropdown-menu::-webkit-scrollbar-thumb{
    border-radius: .5rem;
    background-color: #0004;
    visibility: hidden;
}

.dropdown-menu:hover::-webkit-scrollbar-thumb{ 
    visibility: visible;
}

  .dropdown-menu a:hover {
    background-color: #f5f5f5;
  }

  .dropdown-menu a.activeD {
    background-color: #00816a;
    color: white;
  }

  .dropdown-menu a:last-child {
    border-bottom: none;
  }

  .dropdown.show .dropdown-menu {
    max-height: 300px;
    opacity: 1;
    overflow-y: auto; /* Enable vertical scrolling */
    transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
  }

  .table-wrapper a {
    color: #0398dc !important;
  }

  .table-wrapper {
  margin-top: 20px;
  border-radius: 10px;
  overflow-x: auto;
  border: 1px solid #ffb09e;
  background-color: white;
}

.table-wrapper::-webkit-scrollbar{
    width: 5px;
    height: 5px;
}

.table-wrapper::-webkit-scrollbar-thumb{
    border-radius: .5rem;
    background-color: #0004;
    visibility: hidden;
}

.table-wrapper:hover::-webkit-scrollbar-thumb{ 
    visibility: visible;
}

/* Updated table styling */
table {
  border-collapse: collapse;
  width: 100%;
  background-color: white;
}

/* Remove bottom border from last row */
tr:last-child td {
  border-bottom: none !important;
}

  th, td {
    text-align: center;
    padding-top: 7px;
    padding-bottom: 7px;
    padding-right: 5px;
    padding-left: 5px;
    font-size: 12px;
    border-bottom: 1px solid #ddd !important;
  }

  th {
    background-color: #00816a;
    color: white;
  }

  .team-logo {
    width: 23px;
    height: 23px;
    vertical-align: middle;
  }

  .position {
    text-align: center;
  }

  .logo-col {
    text-align: center;
  }
  
  .text-green {
    color: #28a745 !important; /* Bootstrap success green */
  }
  
  .text-dark-green {
    color: #155724 !important; /* Dark green */
  }
  
  .bg-gold {
    background-color: #ffd9004f !important; /* Gold background */
  }

  .bg-silver {
    background-color: #c0c0c04f !important; /* Silver background */
  }

  .no-bottom-border {
  border-bottom: none !important;
}

/* Add to <style> for horizontal scrollable tabs */
.tab-scroll-wrapper {
  overflow-x: auto;
  white-space: nowrap;
  -webkit-overflow-scrolling: touch;
  margin-bottom: 10px;
}
.tab-scroll-wrapper ul.nav-tabs {
  flex-wrap: nowrap !important;
  display: inline-flex;
  min-width: max-content;
}
.tab-scroll-wrapper ul.nav-tabs li {
  float: none;
  display: inline-block;
}

.tab-scroll-wrapper::-webkit-scrollbar{
    width: 5px;
    height: 5px;
}

.tab-scroll-wrapper::-webkit-scrollbar-thumb{
    border-radius: .5rem;
    background-color: #0004;
    visibility: hidden;
}

.tab-scroll-wrapper:hover::-webkit-scrollbar-thumb{ 
    visibility: visible;
}
    </style>
{% endblock %}

{% block content %}
<div style="padding-top: 55px;"></div>

<section id="center" class="pt-3 pb-3 center_live">
 <div class="container-xl">

   <div class="row schedule2">
    <div class="col-md-9">
    <div class="live">
      <div class="live_2 mt-2"><center><span class="text-white fw-bold" style="font-size: 25px">All Time IPL Data</span></center></div>
      <div class="score_1 mt-2">
        <div class="tab-scroll-wrapper">
          <ul class="d-flex justify-content-center font_14 fw-bold nav nav-tabs border-0" id="inningsTabs">
            <li class="me-2 mt-1 mb-1" style="font-size: 16px">
              <a class="border_orange d-block p-1 px-3 rounded-pill" data-bs-toggle="tab" aria-expanded="true" href="{{ url_for('main.resultrecords') }}">Result Records</a>
            </li>
            <li class="me-2 mt-1 mb-1" style="font-size: 16px">
              <a class="border_orange d-block p-1 px-3 rounded-pill" data-bs-toggle="tab" aria-expanded="true" href="{{ url_for('main.teamscoringrecords') }}">Teams Records</a>
            </li>
            <li class="me-2 mt-1 mb-1" style="font-size: 16px">
              <a class="border_orange d-block p-1 px-3 rounded-pill active" data-bs-toggle="tab" aria-expanded="true" href="{{ url_for('main.individualbattingrecords') }}">Ind. Batting Records</a>
            </li>
          </ul>
        </div>
      </div>
      <center><div class="pt-3 dropdown">
        <button class="dropdown-toggle" onclick="toggleDropdown()" id="dropdownButton">Highest Career Runs<i class="fa fa-chevron-down font_10 ms-1"></i></button>
        <div class="dropdown-menu pt-0 pb-0" id="dropdownMenu">
        <a href="#" class="activeD" onclick="selectOption(this, 'Highest Career Runs')">Highest Career Runs</a>
        <a href="#" onclick="selectOption(this, 'Highest Individual Score')">Highest Individual Score</a>
        <a href="#" onclick="selectOption(this, 'Most Centuries')">Most Centuries</a>
        <a href="#" onclick="selectOption(this, 'Most Half Centuries')">Most Half Centuries</a>
        <a href="#" onclick="selectOption(this, 'Most Runs in a Season')">Most Runs in a Season</a>
        <a href="#" onclick="selectOption(this, 'Most Career Sixes')">Most Career Sixes</a>
        <a href="#" onclick="selectOption(this, 'Most Career Fours')">Most Career Fours</a>
        <a href="#" onclick="selectOption(this, 'Most Sixes in an Innings')">Most Sixes in an Innings</a>
        </div>
      </div></center>
      <div id="tableContainer" class="table-wrapper"></div>
    </div>
  </div>
   </div>
 </div>
</section>
<script>
  const statsData = {{ stats|tojson|safe }}
    const fullNames = {{ fn|tojson|safe }};

    function toggleDropdown() {
    const chevron = document.querySelector('.dropdown-toggle .fa-chevron-down, .dropdown-toggle .fa-chevron-up');
    const dropdown = document.querySelector('.dropdown');
    const menu = document.getElementById('dropdownMenu');
    dropdown.classList.toggle('show');
    if (dropdown.classList.contains('show')) {
        chevron.classList.remove('fa-chevron-down');
        chevron.classList.add('fa-chevron-up');
        menu.style.display = 'block';
    } else {
        chevron.classList.remove('fa-chevron-up');
        chevron.classList.add('fa-chevron-down');
        setTimeout(() => { menu.style.display = 'none'; }, 500); // Wait for animation
    }
  }

  // Close dropdown when clicking outside
  window.onclick = function(event) {
    if (!event.target.matches('.dropdown-toggle')) {
      var dropdowns = document.getElementsByClassName("dropdown");
      var chevrons = document.querySelectorAll('.dropdown-toggle .fa-chevron-up');
      for (var i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
          chevrons.forEach(chevron =>{
            chevron.classList.remove('fa-chevron-up');
          chevron.classList.add('fa-chevron-down');
          });
        }
      }
    }
  }

  function selectOption(element, optionTitle) {
    // Remove active from all
    const items = document.querySelectorAll('.dropdown-menu a');
    items.forEach(item => item.classList.remove('activeD'));
    
    // Set active to clicked one
    element.classList.add('activeD');

    // Update button text
    document.getElementById('dropdownButton').innerHTML = `${optionTitle} <i class="fa fa-chevron-down font_10 ms-1"></i>`;

    // Close dropdown
    document.querySelector('.dropdown').classList.remove('show');
    let tableData;
    tableData = statsData.filter(item => item.record.toLowerCase() === optionTitle.toLowerCase());
    
  switch(optionTitle) {
        case 'Highest Career Runs':
            highestCareerRunsTable(tableData);
            break;
        case 'Highest Individual Score':
            highestIndividualScoreTable(tableData);
            break;
        case 'Most Centuries':
            mostCenturiesTable(tableData);
            break;
        case 'Most Half Centuries':
            mostHalfCenturiesTable(tableData);
            break;
        case 'Most Runs in a Season':
            mostRunsInSeasonTable(tableData);
            break;
        case 'Most Career Sixes':
            mostCareerSixesTable(tableData);
            break;
        case 'Most Career Fours':
            mostCareerFoursTable(tableData);
            break;
        case 'Most Sixes in an Innings':
            mostSixesInInningsTable(tableData);
            break;
    }
  }

  // Add sortable table header styles to <head>
const sortableStyle = document.createElement('style');
sortableStyle.textContent = `
/* Sortable table headers */
.sortable-header {
    cursor: pointer;
    user-select: none;
    position: relative;
    padding-right: 20px !important;
    transition: background-color 0.2s ease;
    /*white-space: nowrap;*/
    overflow: hidden;
    text-overflow: ellipsis;
}
.sortable-header:hover {
    /*background-color: rgba(0, 123, 255, 0.1);*/
}
.sort-icon {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.6rem;
    color: #cad2d8;
    transition: color 0.2s ease;
}
.sortable-header:hover .sort-icon {
    color: #007bff;
}
.sort-icon.fa-sort-up,
.sort-icon.fa-sort-down {
    color: #007bff;
}
`;
document.head.appendChild(sortableStyle);

  function applyTableSorting(table) {
  const ths = table.querySelectorAll('thead th');
  const tbody = table.querySelector('tbody');
  let currentSort = { col: null, asc: true };

  // Helper to check if a value is a valid date
  function isValidDate(val) {
    const d = new Date(val);
    return !isNaN(d) && /\d{4}|\d{2}/.test(val); // crude check for date-like string
  }

  ths.forEach((th, colIdx) => {
    th.classList.add('sortable-header');
    // Remove any previous sort icon
    let icon = th.querySelector('.sort-icon');
    if (icon) icon.remove();
    // Add new sort icon
    icon = document.createElement('i');
    icon.className = 'sort-icon fa fa-sort';
    th.appendChild(icon);
    th.onclick = function() {
      ths.forEach((h, i) => {
        const ic = h.querySelector('.sort-icon');
        if (ic) {
          ic.className = 'sort-icon fa fa-sort';
        }
        h.classList.remove('active');
      });
      th.classList.add('active');
      let sortAsc = true;
      if (currentSort.col === colIdx) sortAsc = !currentSort.asc;
      currentSort = { col: colIdx, asc: sortAsc };
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const lastColIdx = ths.length - 1;
      let isDateCol = false;
      if (colIdx === lastColIdx) {
        // Check if all values in the last column are valid dates
        isDateCol = rows.every(row => isValidDate(row.querySelectorAll('td')[colIdx].textContent.trim()));
      }
      const sortedRows = rows.sort((a, b) => {
        const aText = a.querySelectorAll('td')[colIdx].textContent.trim();
        const bText = b.querySelectorAll('td')[colIdx].textContent.trim();
        if (colIdx === lastColIdx && isDateCol) {
          const aDate = new Date(aText);
          const bDate = new Date(bText);
          return sortAsc ? aDate - bDate : bDate - aDate;
        }
        // Numeric sort if both are numbers
        if (!isNaN(aText) && !isNaN(bText) && aText !== '' && bText !== '') {
          return sortAsc ? (Number(aText) - Number(bText)) : (Number(bText) - Number(aText));
        }
        // String sort
        return sortAsc ? aText.localeCompare(bText) : bText.localeCompare(aText);
      });
      sortedRows.forEach(row => tbody.appendChild(row));
      // Update icon for sorted column
      icon.className = sortAsc ? 'sort-icon fa fa-sort-up' : 'sort-icon fa fa-sort-down';
    };
  });
}

  function highestCareerRunsTable(data) {
    const tableContainer = document.getElementById('tableContainer');

    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);

     // Build HTML table
    let tableHTML = '<table class="Records-table"><thead><tr>';

    // Add custom headers
    tableHTML += '<th class="position"></th>'; // Position column
    tableHTML += '<th>Player</th>'; // Winner column
  tableHTML += '<th>Teams</th>'; // Margin column
  tableHTML += '<th>Span</th>'; // Balls Rem column
  tableHTML += '<th>Mat</th>'; // Target column
  tableHTML += '<th>Inns</th>'; // Overs column
  tableHTML += '<th>Not Outs</th>'; // Balls column
  tableHTML += '<th>Runs</th>'; // Runs column
    tableHTML += '<th>HS</th>'; // HS column
    tableHTML += '<th>Avg</th>'; // Avg column
    tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
    tableHTML += '<th>SR</th>'; // SR column
    tableHTML += '<th>100s</th>'; // 100s column
    tableHTML += '<th>50s</th>'; // 50s column
    tableHTML += '<th>0s</th>'; // 0s column
    tableHTML += '<th>4s</th>'; // 4s column
    tableHTML += '<th>6s</th>'; // 6s column
  tableHTML += '</tr></thead><tbody>';

    // Add data rows
    if (data && Array.isArray(data)) {
        data.forEach((team, index) => {
            tableHTML += '<tr>';
            tableHTML += `<td class="position">${index + 1}</td>`; // Position
            let stat = ["Player", "Teams", "Span", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
            tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
            tableHTML += `<td>${stat[1]}</td>`;
            tableHTML += `<td>${stat[2]}</td>`;
            tableHTML += `<td>${stat[3]}</td>`;
            tableHTML += `<td>${stat[4]}</td>`;
            tableHTML += `<td>${stat[5]}</td>`;
            tableHTML += `<td class="fw-bold">${stat[6]}</td>`;
            tableHTML += `<td>${stat[7]}</td>`;
            tableHTML += `<td>${stat[8]}</td>`;
            tableHTML += `<td>${stat[9]}</td>`;
            tableHTML += `<td>${stat[10]}</td>`;
            tableHTML += `<td>${stat[11]}</td>`;
            tableHTML += `<td>${stat[12]}</td>`;
            tableHTML += `<td>${stat[13]}</td>`;
            tableHTML += `<td>${stat[14]}</td>`;
            tableHTML += `<td>${stat[15]}</td>`;
            tableHTML += '</tr>';
        });
    }

  tableHTML += '</tbody></table>';
    tableContainer.innerHTML = tableHTML;

    // Apply sorting to the new table
  const table = tableContainer.querySelector('table');
  applyTableSorting(table);
  }

  function highestIndividualScoreTable(data) {
    const tableContainer = document.getElementById('tableContainer');

    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);

     // Build HTML table
    let tableHTML = '<table class="Records-table"><thead><tr>';

    // Add custom headers
    tableHTML += '<th class="position"></th>'; // Position column
    tableHTML += '<th>Player</th>'; // Winner column
    tableHTML += '<th>Runs</th>'; // Margin column
    tableHTML += '<th>Mins</th>'; // Balls Rem column
    tableHTML += '<th>Balls</th>'; // Target column
    tableHTML += '<th>4s</th>'; // Overs column
    tableHTML += '<th>6s</th>'; // Balls column
    tableHTML += '<th>SR</th>'; // Runs column
    tableHTML += '<th>Team</th>'; // HS column
    tableHTML += '<th>Opponent</th>'; // Avg column
    tableHTML += '<th>Venue</th>'; // Balls Faced column
    tableHTML += '<th>Date</th>'; // SR column
    tableHTML += '</tr></thead><tbody>';
    // Add data rows
    if (data && Array.isArray(data)) {
        data.forEach((team, index) => {
            tableHTML += '<tr>';
            tableHTML += `<td class="position">${index + 1}</td>`; // Position
            let stat = ["Player", "Runs", "Mins", "Balls", "4s", "6s", "SR", "Team", "Opposition", "Ground", "Date"].map(key => team.stats[key]);
            tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
            tableHTML += `<td class="fw-bold">${stat[1]}</td>`;
            tableHTML += `<td>${stat[2]}</td>`;
            tableHTML += `<td>${stat[3]}</td>`;
            tableHTML += `<td>${stat[4]}</td>`;
            tableHTML += `<td>${stat[5]}</td>`;
            tableHTML += `<td>${stat[6]}</td>`;
            tableHTML += `<td class="fw-bold">${stat[7]}</td>`;
            tableHTML += `<td class="fw-bold fst-italic">${stat[8]}</td>`;
            tableHTML += `<td>${stat[9]}</td>`;
            tableHTML += `<td>${stat[10]}</td>`;
            tableHTML += '</tr>';
        });
    }
    tableHTML += '</tbody></table>';
    tableContainer.innerHTML = tableHTML;
    // Apply sorting to the new table
    const table = tableContainer.querySelector('table');
    applyTableSorting(table);
    }

    function mostCenturiesTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Teams</th>'; // Margin column
        tableHTML += '<th>Span</th>'; // Balls Rem column
        tableHTML += '<th>Mat</th>'; // Target column
        tableHTML += '<th>Inns</th>'; // Overs column
        tableHTML += '<th>Not Outs</th>'; // Balls column
        tableHTML += '<th>Runs</th>'; // Runs column
        tableHTML += '<th>HS</th>'; // HS column
        tableHTML += '<th>Avg</th>'; // Avg column
        tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
        tableHTML += '<th>SR</th>'; // SR column
        tableHTML += '<th>100s</th>'; // 100s column
        tableHTML += '<th>50s</th>'; // 50s column
        tableHTML += '<th>0s</th>'; // 0s column
        tableHTML += '<th>4s</th>'; // 4s column
        tableHTML += '<th>6s</th>'; // 6s column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Teams", "Span", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td>${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td>${stat[7]}</td>`;
                tableHTML += `<td>${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[11]}</td>`;
                tableHTML += `<td>${stat[12]}</td>`;
                tableHTML += `<td>${stat[13]}</td>`;
                tableHTML += `<td>${stat[14]}</td>`;
                tableHTML += `<td>${stat[15]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

    function mostHalfCenturiesTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Teams</th>'; // Margin column
        tableHTML += '<th>Span</th>'; // Balls Rem column
        tableHTML += '<th>Mat</th>'; // Target column
        tableHTML += '<th>Inns</th>'; // Overs column
        tableHTML += '<th>Not Outs</th>'; // Balls column
        tableHTML += '<th>Runs</th>'; // Runs column
        tableHTML += '<th>HS</th>'; // HS column
        tableHTML += '<th>Avg</th>'; // Avg column
        tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
        tableHTML += '<th>SR</th>'; // SR column
        tableHTML += '<th>100s</th>'; // 100s column
        tableHTML += '<th>50s</th>'; // 50s column
        tableHTML += '<th>0s</th>'; // 0s column
        tableHTML += '<th>4s</th>'; // 4s column
        tableHTML += '<th>6s</th>'; // 6s column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Teams", "Span", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td>${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td>${stat[7]}</td>`;
                tableHTML += `<td>${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += `<td>${stat[11]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[12]}</td>`;
                tableHTML += `<td>${stat[13]}</td>`;
                tableHTML += `<td>${stat[14]}</td>`;
                tableHTML += `<td>${stat[15]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

    function mostRunsInSeasonTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Team</th>'; // Margin column
        tableHTML += '<th>Season</th>'; // Balls Rem column
        tableHTML += '<th>Mat</th>'; // Target column
        tableHTML += '<th>Inns</th>'; // Overs column
        tableHTML += '<th>Not Outs</th>'; // Balls column
        tableHTML += '<th>Runs</th>'; // Runs column
        tableHTML += '<th>HS</th>'; // HS column
        tableHTML += '<th>Avg</th>'; // Avg column
        tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
        tableHTML += '<th>SR</th>'; // SR column
        tableHTML += '<th>100s</th>'; // 100s column
        tableHTML += '<th>50s</th>'; // 50s column
        tableHTML += '<th>0s</th>'; // 0s column
        tableHTML += '<th>4s</th>'; // 4s column
        tableHTML += '<th>6s</th>'; // 6s column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Year", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0].split(' (')[0]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[0].split(' (')[1]?.split(')')[0] || ''}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td>${stat[7]}</td>`;
                tableHTML += `<td>${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += `<td>${stat[11]}</td>`;
                tableHTML += `<td>${stat[12]}</td>`;
                tableHTML += `<td>${stat[13]}</td>`;
                tableHTML += `<td>${stat[14]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

    function mostCareerSixesTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Teams</th>'; // Margin column
        tableHTML += '<th>Span</th>'; // Balls Rem column
        tableHTML += '<th>Mat</th>'; // Target column
        tableHTML += '<th>Inns</th>'; // Overs column
        tableHTML += '<th>Not Outs</th>'; // Balls column
        tableHTML += '<th>Runs</th>'; // Runs column
        tableHTML += '<th>HS</th>'; // HS column
        tableHTML += '<th>Avg</th>'; // Avg column
        tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
        tableHTML += '<th>SR</th>'; // SR column
        tableHTML += '<th>100s</th>'; // 100s column
        tableHTML += '<th>50s</th>'; // 50s column
        tableHTML += '<th>0s</th>'; // 0s column
        tableHTML += '<th>4s</th>'; // 4s column
        tableHTML += '<th>6s</th>'; // 6s column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Teams", "Span", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td>${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td>${stat[7]}</td>`;
                tableHTML += `<td>${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += `<td>${stat[11]}</td>`;
                tableHTML += `<td>${stat[12]}</td>`;
                tableHTML += `<td>${stat[13]}</td>`;
                tableHTML += `<td>${stat[14]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[15]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

    function mostCareerFoursTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Teams</th>'; // Margin column
        tableHTML += '<th>Span</th>'; // Balls Rem column
        tableHTML += '<th>Mat</th>'; // Target column
        tableHTML += '<th>Inns</th>'; // Overs column
        tableHTML += '<th>Not Outs</th>'; // Balls column
        tableHTML += '<th>Runs</th>'; // Runs column
        tableHTML += '<th>HS</th>'; // HS column
        tableHTML += '<th>Avg</th>'; // Avg column
        tableHTML += '<th>Balls Faced</th>'; // Balls Faced column
        tableHTML += '<th>SR</th>'; // SR column
        tableHTML += '<th>100s</th>'; // 100s column
        tableHTML += '<th>50s</th>'; // 50s column
        tableHTML += '<th>0s</th>'; // 0s column
        tableHTML += '<th>4s</th>'; // 4s column
        tableHTML += '<th>6s</th>'; // 6s column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Teams", "Span", "Matches", "Inns", "Not Outs", "Runs", "HS", "Avg", "Balls Faced", "SR", "100s", "50s", "0s", "4s", "6s"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td>${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td>${stat[7]}</td>`;
                tableHTML += `<td>${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += `<td>${stat[11]}</td>`;
                tableHTML += `<td>${stat[12]}</td>`;
                tableHTML += `<td>${stat[13]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[14]}</td>`;
                tableHTML += `<td>${stat[15]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

    function mostSixesInInningsTable(data) {
    const tableContainer = document.getElementById('tableContainer');
    // Add required CSS styles
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      .merged-cell {
        text-align: center;
      }
      .Records-table td {
        text-align: center;
        padding: 8px;
      }
      .Records-table td {
        white-space: nowrap;
      }
      .Records-table td:nth-child(2) {
        white-space: wrap;
        text-align: left;
      }
      .Records-table td:nth-child(3) {
        white-space: wrap;
        text-align: left;
      }
    `;
    document.head.appendChild(styleElement);
        // Build HTML table
        let tableHTML = '<table class="Records-table"><thead><tr>';
        // Add custom headers
        tableHTML += '<th class="position"></th>'; // Position column
        tableHTML += '<th>Player</th>'; // Winner column
        tableHTML += '<th>Runs</th>'; // Margin column
        tableHTML += '<th>Mins</th>'; // Balls Rem column
        tableHTML += '<th>Balls</th>'; // Target column
        tableHTML += '<th>4s</th>'; // Overs column
        tableHTML += '<th>6s</th>'; // Balls column
        tableHTML += '<th>SR</th>'; // Runs column
        tableHTML += '<th>Team</th>'; // HS column
        tableHTML += '<th>Opponent</th>'; // Avg column
        tableHTML += '<th>Venue</th>'; // Balls Faced column
        tableHTML += '<th>Date</th>'; // SR column
        tableHTML += '</tr></thead><tbody>';
        // Add data rows
        if (data && Array.isArray(data)) {
            data.forEach((team, index) => {
                tableHTML += '<tr>';
                tableHTML += `<td class="position">${index + 1}</td>`; // Position
                let stat = ["Player", "Runs", "Mins", "Balls", "4s", "6s", "SR", "Team", "Opposition", "Ground", "Date"].map(key => team.stats[key]);
                tableHTML += `<td class="fw-bold text-blue">${stat[0]}</td>`;
                tableHTML += `<td>${stat[1]}</td>`;
                tableHTML += `<td>${stat[2]}</td>`;
                tableHTML += `<td>${stat[3]}</td>`;
                tableHTML += `<td>${stat[4]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[5]}</td>`;
                tableHTML += `<td>${stat[6]}</td>`;
                tableHTML += `<td class="fw-bold">${stat[7]}</td>`;
                tableHTML += `<td class="fw-bold fst-italic">${stat[8]}</td>`;
                tableHTML += `<td>${stat[9]}</td>`;
                tableHTML += `<td>${stat[10]}</td>`;
                tableHTML += '</tr>';
            });
        }
        tableHTML += '</tbody></table>';
        tableContainer.innerHTML = tableHTML;
        // Apply sorting to the new table
        const table = tableContainer.querySelector('table');
        applyTableSorting(table);
    }

  // Initial table render - same approach as battingStat.html
  const initialData = statsData.filter(item => item.record === 'Highest Career Runs');
  highestCareerRunsTable(initialData);

</script>
{% endblock %}