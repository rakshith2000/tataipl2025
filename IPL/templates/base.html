<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head %}
    <title>TATA IPL 2025</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{{ url_for('static', filename= 'images/title-ipl-logo.ico') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&display=swap"
      rel="stylesheet"
    />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <style>
      /* Global Styles */
      body {
        font-family: 'Exo 2', sans-serif;
        background: linear-gradient(145deg, #e0f7ff, #f1faff);
        margin: 0;
        padding: 0;
      }
       body::-webkit-scrollbar {
        width: 3px;
        height: 10px;
    }

    body::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, .1);
        border-radius: 10px;
    }

    body::-webkit-scrollbar-thumb {
        background-color: #ff6b81;
        border-radius: 10px;
    }

    body::-webkit-scrollbar-thumb:hover {
        background-color: #f7b733;
    }

      /* Navbar */
      nav.navbar {
        background: linear-gradient(145deg, #0056d2, #003c8a);
        color: white;
        padding: 10px 20px;
        position: fixed;
        width: 100%;
        top: 0;
        left: 0;
  overflow: visible; /* allow dropdowns to overflow instead of being clipped */
        z-index: 1000;
      }

      nav a.navbar-brand {
        font-family: 'Exo 2', sans-serif;
        font-weight: 700;
        color: white;
        text-transform: uppercase;
        display: flex;
        align-items: center;
      }

      /* Modern Navbar Links */
      nav .navbar-nav .nav-link {
        color: #fff !important;
        font-family: 'Exo 2', sans-serif;
        font-size: 1.1rem !important;
        font-weight: 600;
        padding: 8px 18px 8px 18px;
        margin-right: 5px;
        border-radius: 8px;
        position: relative;
        transition: color 0.2s;
        text-decoration: none;
        background: none;
      }
      /* Hide the pseudo-element and use a box-shadow underline to avoid rendering artifacts */
      nav .navbar-nav .nav-link::after {
        display: none !important;
      }
      nav .navbar-nav .nav-link {
        transition: color 0.25s, box-shadow 0.2s ease;
      }
      nav .navbar-nav .nav-link:hover,
      nav .navbar-nav .nav-link.active {
        box-shadow: inset 0 -2px 0 #fff; /* thin 2px underline */
      }
      nav .navbar-nav .nav-link:hover,
      nav .navbar-nav .nav-link.active {
        color: #fff !important;
        background: none;
      }
      nav .navbar-nav .nav-link:hover::after,
      nav .navbar-nav .nav-link.active::after {
        transform: scaleX(1);
      }

      /* Remove old button styles from nav links */
      nav a.btn {
        background: none !important;
        color: inherit !important;
        box-shadow: none !important;
        border: none !important;
        font-size: inherit !important;
        font-weight: inherit !important;
        border-radius: 0 !important;
        padding: 0 !important;
        margin-right: 0 !important;
      }

      .navbar-toggler-icon {
        background-image: url("data:image/svg+xml;charset=UTF8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(255, 255, 255, 1)' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
      }

      .nav-item{
        margin-right: 5px;
      }

    </style>
    <style>
      /* ----- Custom dropdown styles (unique names to avoid Bootstrap overrides) ----- */
      .custom-dropdown { position: relative; }
      .custom-dropdown-toggle { cursor: pointer; display: inline-flex; align-items: center; }
      .custom-dropdown-toggle .fa { color: #fff; margin-left: 8px; font-size: 12px; transition: transform 0.18s ease; }
      .custom-dropdown.is-open > .custom-dropdown-toggle .fa { transform: rotate(180deg); }

      /* Desktop: absolute overlay menu */
      @media (min-width: 992px) {
        .custom-dropdown .custom-dropdown-menu {
          position: absolute;
          left: 0;
          top: 100%;
          white-space: nowrap;
          z-index: 2000;
          background: #0b2a66;
          border-radius: 8px;
          box-shadow: 0 8px 24px rgba(0,0,0,0.12);
          padding: 6px 8px;
          opacity: 0;
          transform: translateY(-8px) scale(0.98);
          transform-origin: top center;
          transition: transform 220ms cubic-bezier(.2,.8,.2,1), opacity 180ms ease;
          visibility: hidden;
          pointer-events: none;
        }
      }
      /* Mobile: collapsible static menu */
      @media (max-width: 991px) {
        .custom-dropdown .custom-dropdown-menu {
          position: static;
          max-height: 0;
          overflow: hidden;
          opacity: 0;
          visibility: hidden;
          /* Make mobile menu visually distinct from the navbar (white background) */
          background: #0b2a66;
          padding: 6px 8px;
          border-radius: 8px;
          box-shadow: 0 6px 18px rgba(2,6,23,0.12);
          transition: max-height 280ms ease, opacity 180ms ease;
          pointer-events: none;
        }
      }
      .custom-dropdown .custom-dropdown-item { display: block; padding: 10px 14px; color: #ffffff; text-decoration: none; border-radius: 6px; font-style: italic; }
      .custom-dropdown .custom-dropdown-item:hover { background: rgba(5, 75, 180, 0.247); }
      .custom-dropdown.is-open > .custom-dropdown-menu,
      .custom-dropdown .custom-dropdown-menu.show {
        opacity: 1; transform: translateY(0) scale(1); visibility: visible; pointer-events: auto; }
      @media (max-width: 991px) {
        .custom-dropdown.is-open > .custom-dropdown-menu { max-height: 800px; opacity: 1; visibility: visible; pointer-events: auto; }
      }
      .outline-btn {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.18);
        background: transparent;
        color: #fff;
        text-decoration: none;
        font-weight: 700;
        font-size: 0.95rem;
        margin-left: 8px;
        line-height: 1;
        transition: background 160ms ease, color 160ms ease, border-color 160ms ease, transform 120ms ease;
      }
      .outline-btn:hover, .outline-btn:focus { background: rgba(255,255,255,0.1); color: #fff; }
      .outline-btn:active { transform: translateY(1px); }
      .outline-btn--accent { border-color: #4fc3f7; color: #4fc3f7; }
      .outline-btn--accent:hover { background: rgba(79,195,247,0.1); color: #4fc3f7; }
      .outline-btn--danger { border-color: #ff6b81; color: #ff6b81; }
      .outline-btn--danger:hover { background: rgba(255,107,129,0.1); color: #ff6b81; }
      .outline-btn--white { border-color: rgba(255,255,255,0.9); color: #fff; }
      .outline-btn,
      .outline-btn:hover,
      .outline-btn:focus {
        text-decoration: none !important;
        outline: none;
      }

      </style>

    {% endblock %}
  </head>

  <body>
    <nav class="navbar navbar-expand-lg">
      <a class="navbar-brand" style="padding-right: 100px;" href="{{ url_for('main.index') }}">
        <img src="{{ url_for('static', filename= 'images/logo.png') }}"
              alt="user photo" width="25" height="40" />
        &nbsp;TATA IPL 2025
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a href="{{ url_for('main.displayPT') }}" class="nav-link">POINTS TABLE</a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('main.displayFR') }}" class="nav-link">MATCHES</a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('main.teams') }}" class="nav-link">TEAMS</a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('main.todayMatch') }}" class="nav-link">LIVE</a>
          </li>
          <li class="nav-item">
            <a href="{{ url_for('main.battingstats') }}" class="nav-link">STATS</a>
          </li>
          <!-- Custom dropdown (uses unique class names to avoid Bootstrap dropdown styles) -->
          <li class="nav-item custom-dropdown">
            <a class="nav-link custom-dropdown-toggle" href="#" id="allTimeCustomToggle" role="button" aria-haspopup="true" aria-expanded="false">
              ALL TIME IPL <i class="fa fa-chevron-down"></i>
            </a>
      
            <div class="custom-dropdown-menu" aria-labelledby="allTimeCustomToggle">
              <a class="custom-dropdown-item" style="font-weight: bold;" href="{{ url_for('main.alltimeipl') }}">STATISTICS</a>
              <a class="custom-dropdown-item" style="font-weight: bold;" href="{{ url_for('main.resultrecords') }}">RECORDS</a>
            </div>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          {% if not current_user.is_authenticated %}
          <a href="{{ url_for('auth.login') }}" class="outline-btn outline-btn--white">Login</a>
          {% endif %}
          {% if current_user.is_authenticated %}
          <a href="{{ url_for('main.update') }}" class="outline-btn outline-btn--accent">Update/Delete</a>
          <a href="{{ url_for('auth.logout') }}" class="outline-btn outline-btn--danger">Log Out</a>
          {% endif %}
        </form>
      </div>
    </nav>

    {% block content %} {% endblock %}

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9JoBS8Nf5CFcSZ6p4UcCozDz2bK5u2v9KgN3" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
      // Custom dropdown behavior: hover on desktop, click on mobile for .custom-dropdown

      (function() {
        const BREAKPOINT = 992; // matches Bootstrap lg
        function isDesktop() { return window.innerWidth >= BREAKPOINT; }

        function bindHover() {
          document.querySelectorAll('nav.navbar .custom-dropdown').forEach(drop => {
            if (drop.__hoverBound) return;
            drop.__hoverBound = true;
            const toggle = drop.querySelector('.custom-dropdown-toggle');
            const menu = drop.querySelector('.custom-dropdown-menu');
            drop.addEventListener('mouseenter', () => {
              if (!isDesktop()) return;
              drop.classList.add('is-open');
              if (menu) menu.classList.add('show');
              if (toggle) toggle.setAttribute('aria-expanded', 'true');
            });
            drop.addEventListener('mouseleave', () => {
              if (!isDesktop()) return;
              drop.classList.remove('is-open');
              if (menu) menu.classList.remove('show');
              if (toggle) toggle.setAttribute('aria-expanded', 'false');
            });
          });
        }

        function bindDelegatedClick() {
          if (window.__customDropdownClickBound) return;
          window.__customDropdownClickBound = true;
          let lastTouchTime = 0;

          function handleToggleForEvent(toggle) {
            if (isDesktop()) return; // desktop uses hover
            const drop = toggle.closest('.custom-dropdown');
            if (!drop) return;
            const menu = drop.querySelector('.custom-dropdown-menu');
            const willOpen = !drop.classList.contains('is-open');
            drop.classList.toggle('is-open', willOpen);
            if (menu) menu.classList.toggle('show', willOpen);
            toggle.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
          }

          // touchstart to make taps immediate
          document.addEventListener('touchstart', function(e) {
            lastTouchTime = Date.now();
            const toggle = e.target.closest('.custom-dropdown-toggle');
            if (toggle && toggle.closest('nav.navbar')) {
              e.preventDefault();
              handleToggleForEvent(toggle);
              e.stopPropagation();
              e.stopImmediatePropagation();
            }
          }, {passive: false});

          // click as fallback (ignore if recent touch)
          document.addEventListener('click', (e) => {
            if (Date.now() - lastTouchTime < 700) return;
            const toggle = e.target.closest('.custom-dropdown-toggle');
            if (toggle && toggle.closest('nav.navbar')) {
              if (isDesktop()) { e.preventDefault(); return; }
              e.preventDefault();
              handleToggleForEvent(toggle);
              e.stopPropagation();
              e.stopImmediatePropagation();
              return;
            }
            // Click outside: close open dropdowns on mobile
            if (!e.target.closest('nav.navbar')) {
              if (!isDesktop()) {
                document.querySelectorAll('nav.navbar .custom-dropdown.is-open').forEach(d => {
                  d.classList.remove('is-open');
                  const m = d.querySelector('.custom-dropdown-menu');
                  if (m) m.classList.remove('show');
                  const t = d.querySelector('.custom-dropdown-toggle');
                  if (t) t.setAttribute('aria-expanded','false');
                });
              }
            }
          });
        }

        bindHover();
        bindDelegatedClick();

        // Close open dropdowns on resize and re-bind hover handlers (debounced)
        let resTimer = null;
        window.addEventListener('resize', () => {
          clearTimeout(resTimer);
          resTimer = setTimeout(() => {
            document.querySelectorAll('nav.navbar .custom-dropdown.is-open').forEach(d => {
              d.classList.remove('is-open');
              const m = d.querySelector('.custom-dropdown-menu');
              if (m) m.classList.remove('show');
              const t = d.querySelector('.custom-dropdown-toggle');
              if (t) t.setAttribute('aria-expanded','false');
            });
            // Re-bind hover handlers in case DOM changed
            bindHover();
          }, 120);
        });

      })();
    </script>
  </body>
</html>
