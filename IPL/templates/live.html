{% extends "base.html" %} {% block head %} {{ super() }}
	<meta name="robots" content="noindex,nofollow" />
        {% if dt3['info'] != "" and 'won' not in dt3['info'] and 'abandoned' not in dt3['info'] | lower and 'no result' not in dt3['info'] | lower %}
        <meta http-equiv="refresh" content="8">{% endif %}
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="{{ url_for('static', filename= 'css/bootstrap.min.css') }}" rel="stylesheet" >
	 <link href="{{ url_for('static', filename= 'fonts/css/fontawesome.min.css') }}" rel="stylesheet" >
	<link href="{{ url_for('static', filename= 'fonts/css/brands.min.css') }}" rel="stylesheet" />
    <link href="{{ url_for('static', filename= 'fonts/css/solid.min.css') }}" rel="stylesheet" />
	<link href="{{ url_for('static', filename= 'css/global.css') }}" rel="stylesheet">
	<link href="{{ url_for('static', filename= 'css/live.css') }}" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
	<link href="{{ url_for('static', filename= 'css/flag-icons.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename= 'css/overs.css') }}" rel="stylesheet">
    <style>
    body {
        font-family: 'Exo 2', sans-serif;
        background: #081033;
  background-image: url('/static/images/banner_bg.png');
  background-size: 100%;
  background-position: center top -48px;
    }
    .container1{
    width: 95%;
    margin: 0 auto;
    text-align: center;
    }

    .table-responsive a{
        color: #0398dc !important;
    }

    .label-container {
            width: 95%;
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            margin: 0 auto;
            padding-bottom: 5px;
        }

        .label-container span {
            font-size: 14px;
        }

        .progress-bar {
            width: 80%;
            background-color: #f0f0f0;
            border-radius: 5px;
            overflow: hidden;
            height: 7px;
            position: relative;
			margin: 0 auto;
        }

        .l-bar {
            height: 100%;
            background-color: var(--c);
            position: absolute;
            left: 0;
        }

        .r-bar {
            height: 100%;
            background-color: var(--c);
            position: absolute;
            right: 0;
        }

        .text-container {
            padding-top: 5px;
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            margin: 0 auto;
            width: 90%;
        }

        .text-container span {
            font-size: 13px;
        }

        .potm-content {
          padding: 10px;
          display: flex;
          align-items: center;
          position: relative;
        }
        .potm-image {
          width: 90px;
          height: 90px;
          border-radius: 50%;
          overflow: hidden;
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
          border: 0px solid white;
          position: relative;
          z-index: 1;
          margin-right: 20px;
          transition: transform 0.3s ease;
          background: linear-gradient(145deg, var(--c1), var(--c2));
        }
        .potm-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        .potm-details {
          flex: 1;
        }
        .potm-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 5px;
    }
        .potm-team {
      color: var(--dark);
      font-weight: 500;
      font-size: 14px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }

    .team-logo {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      border-radius: 50%;
    }
        .potm-stats {
      display: flex;
      gap: 15px;
      margin-top: 15px;
    }
        .stat-item {
      background: var(--light);
      padding: 5px 15px;
      border-radius: 8px;
      text-align: center;
      flex: 1;
      transition: all 0.3s ease;
    }
    /*
    .stat-item:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(58, 134, 255, 0.3);
    }

    .stat-item:hover .stat-value {
      color: white;
    }*/

    .stat-label {
      font-size: 13px;
      font-weight: 500;
      text-transform: uppercase;
      opacity: 0.7;
      margin-bottom: 3px;
    }

    .stat-value {
      font-size: 14px;
      font-weight: 600;
      color: var(--dark);
    }
        .potm-name a{
        color: #0398dc !important;
    }

    /* Floating Back Button */
.floating-back-btn {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 9999;
  background: #fff;
  color: #003c8a;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  border: none;
  cursor: pointer;
  transition: background 0.2s;
}
.floating-back-btn:hover {
  background: #e6e6e6;
}
@media (max-width: 600px) {
  .floating-back-btn {
    top: 10px;
    left: 10px;
    width: 40px;
    height: 40px;
    font-size: 20px;
  }
}
    </style>
{% endblock %}
{% block nav_class %}extra-pr-60 pl-40{% endblock %}

{% block content %}
{% macro num_suffix(n) %}
    {% if n % 100 in [11, 12, 13] %}
        {{ n }}th
    {% elif n % 10 == 1 %}
        {{ n }}st
    {% elif n % 10 == 2 %}
        {{ n }}nd
    {% elif n % 10 == 3 %}
        {{ n }}rd
    {% else %}
        {{ n }}th
    {% endif %}
{% endmacro %}

{% macro get_ball_score(ball) %}
    {%- if ball.isWicket -%}
        {% if ball.isByes %}
            W{{ ball.runsByes|default(0) }}
        {%- elif ball.isLegByes -%}
            W{{ ball.runsLegByes|default(0) }}
        {%- elif ball.isWide -%}
            W{{ ball.runsWide|default(0) }}
        {%- elif ball.teamRuns|default(0) > 0 -%}
            W{{ ball.teamRuns|default(0) }}
        {%- else -%}
            W
        {%- endif -%}
    {%- elif ball.isWide -%}
        {%- if ball.runsWide|default(0) > 1 -%}
            Wd{{ ball.runsWide|default(0) }}
        {%- else -%}
            Wd
        {%- endif -%}
    {%- elif ball.isNoBall -%}
        {%- if ball.isByes -%}
            NB{{ ball.runsByes|default(0) }}
        {%- elif ball.isLegByes -%}
            NL{{ ball.runsLegByes|default(0) }}
        {%- else -%}
            N{{ ball.runsScored|default(0) if ball.runsScored|default(0) > 0 else '' }}
        {%- endif -%}
    {%- elif ball.isLegByes -%}
        L{{ ball.runsLegByes|default(0) if ball.runsLegByes|default(0) > 0 else '' }}
    {%- elif ball.isByes -%}
        B{{ ball.runsByes|default(0) if ball.runsByes|default(0) > 0 else '' }}
    {%- elif ball.teamRuns == 0 -%}
        0
    {%- else -%}
        {{ ball.teamRuns|default(0) }}
    {%- endif -%}
{% endmacro %}

{% macro get_ball_bg_color(score) %}
    {% set score = score|string %}
    {% if score.startswith('Wd') or score.startswith('B') or score.startswith('L') or score.startswith('N') %}
        bg-extra
    {% elif '4' in score %}
        bg-four
    {% elif '6' in score %}
        bg-six
    {% elif score == '0' %}
        bg-dot
    {% elif score in ['1', '2', '3'] %}
        bg-normal
    {% elif score.startswith('W') %}
        bg-wicket
    {% else %}
        bg-normal
    {% endif %}
{% endmacro %}

{% macro get_batsmen(over) %}
    {% set ns = namespace( batsmen = [] ) %}
    {% for ball in over['balls'][::-1] %}
        {% set batsman = ball['comments'][-1]['message'].split(' to ')[1].split('.')[0] | trim %}
        {% if batsman and batsman not in ns.batsmen %}
            {% set ns.batsmen = ns.batsmen + [batsman] %}
        {% endif %}
    {% endfor %}
    {{ ns.batsmen | join('<span>,</span> ') | safe}}
{% endmacro %}

{% macro get_runs(over) %}
    {% set ns = namespace(runs = 0) %}
    {% for ball in over['balls'] %}
        {%- if ball.isWicket -%}
            {% if ball.isByes %}
                {% set ns.runs = ns.runs + ball.runsByes|default(0) %}
            {%- elif ball.isLegByes -%}
                {% set ns.runs = ns.runs + ball.runsLegByes|default(0) %}
            {%- elif ball.isWide -%}
                {% set ns.runs = ns.runs + ball.runsWide|default(0) %}
            {%- elif ball.teamRuns > 0 -%}
                {% set ns.runs = ns.runs + ball.teamRuns|default(0) %}
            {%- else -%}
                {% set ns.runs = ns.runs + 0 %}
            {%- endif -%}
        {%- elif ball.isWide -%}
            {%- if ball.runsWide > 1 -%}
                {% set ns.runs = ns.runs + ball.runsWide|default(0) %}
            {%- else -%}
                {% set ns.runs = ns.runs + 1 %}
            {%- endif -%}
        {%- elif ball.isNoBall -%}
            {%- if ball.isByes -%}
                {%- set ns.runs = ns.runs + ball.runsByes|default(0) + 1 %} 
            {%- elif ball.isLegByes -%}
                {%- set ns.runs = ns.runs + ball.runsLegByes|default(0) + 1 %}
            {%- else -%}
                {% set ns.runs = ns.runs + (ball.runsScored|default(0) if ball.runsScored|default(0) > 0 else 0) + ball.extras|default(1) %}
            {%- endif -%}
        {%- elif ball.isLegByes -%}
            {%- set ns.runs = ns.runs + ball.runsLegByes|default(0) if ball.runsLegByes|default(0) > 0 else ns.runs %}
        {%- elif ball.isByes -%}
            {%- set ns.runs = ns.runs + ball.runsByes|default(0) if ball.runsByes|default(0) > 0 else ns.runs %}
        {%- elif ball.teamRuns == 0 -%}
            {% set ns.runs = ns.runs + 0 %}
        {%- else -%}
            {% set ns.runs = ns.runs + ball.teamRuns|default(0) %}
        {%- endif -%}
    {% endfor %}
    {{ ns.runs }}
{% endmacro %}


<div style="padding-top: 55px;"></div>
<section id="center" class="pt-3 pb-3 center_live">
 <div class="container-xl">
   
   <div class="row schedule2">
    <div class="col-md-9">
	  <div class="live">
		 <div class="live_2 rounded_10 border mt-2" style="background: linear-gradient(145deg, #0056d2, #003c8a)">
           <div class="live_2_inner row px-3 pt-2 pb-2">
		     <div class="col-md-8">
			  <div class="live_2_inner_left">
			    <b class="text-white" style="font-size: 20px">{{ dt1[4] }} vs {{ dt1[5] }}</b>
				<span class="d-block font_14 text-white">{{ dt2[0] }}, {{ dt2[1] }}, {{ dt2[2] }}, TATA Indian Premier League 2025</span>
			  </div>
			 </div>
		   </div>
		   <span class="bg-white px-3 d-block pt-2"><span class="fi fi-{{ tid[dt3['score_strip'][0].team_id][0] | lower }} me-1"></span> <b>{{ tid[dt3['score_strip'][0].team_id][0] }}</b> <span class="float-end font_14">{% if dt3['score_strip'][0].score %}<b class="fs-6">{{ dt3['score_strip'][0].score.split(' (')[0].split('/')[0] if dt3['score_strip'][0].score.split(' (')[0].split('/')[1] == "10" else dt3['score_strip'][0].score.split(' (')[0] }}</b>{{ ' ('~dt3['score_strip'][0].score.split(' (')[1].replace(' ov', '') }}{% else %}{{ 'Yet to Bat' }}{% endif %}</span></span>
		   <span class="bg-white px-3 d-block pt-2"><span class="fi fi-{{ tid[dt3['score_strip'][1].team_id][0] | lower }} me-1"></span> <b>{{ tid[dt3['score_strip'][1].team_id][0] }}</b> <span class="float-end font_14">{% if dt3['score_strip'][1].score %}<b class="fs-6">{{ dt3['score_strip'][1].score.split(' (')[0].split('/')[0] if dt3['score_strip'][1].score.split(' (')[0].split('/')[1] == "10" else dt3['score_strip'][1].score.split(' (')[0] }}</b>{{ ' ('~dt3['score_strip'][1].score.split(' (')[1].replace(' ov', '') }}{% else %}{{ 'Yet to Bat' }}{% endif %}</span></span>
		    {% if dt3['info'] == "" %}{% set fc = 'text-orange' %}{% elif 'won' in dt3['info'] %}{% set fc = 'text-blue' %}{% else %}{% set fc = 'text-danger' %}{% endif %}
             <span class="bg-white font_14 d-block pt-2 pb-2 px-3">{% if dt3['info'] %}<b class="{{ fc }}">{{ dt3['info'] }}</b>{% endif %}{% if dttm > cd %}
		    <div class="clockdiv" data-deadline="{{ dttm.strftime('%Y-%m-%dT%H:%M:%S') }}">
			    <b class="text-orange"><span> Starts in: </span>
			    <span class="days" id="day" style="font-size: 22px;"></span><span style="color: #a6a6a6;"> Days</span>
			    <span class="hours" id="hour" style="font-size: 22px;"></span><span style="color: #a6a6a6;"> Hrs</span>
			    <span class="minutes" id="minute" style="font-size: 22px;"></span><span style="color: #a6a6a6;"> Mins</span>
                <span class="seconds" id="second" style="font-size: 22px;"></span><span style="color: #a6a6a6;"> Secs</span></b>
		    </div>
		    {% endif %}</span>
		   {% if dt3['info'] != "" and 'won' not in dt3['info'] and 'abandoned' not in dt3['info'] | lower and 'no result' not in dt3['info'] | lower %}
               {% if dt3['score_strip'][0]['currently_batting'] == true %}
                   <span class="d-block pt-2 pt-2 pb-2 px-3 font_12 bg-light">Current RR: <b>{{ dt3['score_strip'][0]['run_rate'].split(' ')[2] }}</b><br>Current Partnership: <b>{{ dt3['innings'][0]['current_partnership']['runs'] }} ({{ dt3['innings'][0]['current_partnership']['balls'] }})</b></span>
               {% elif dt3['score_strip'][1]['currently_batting'] == true %}
                   <span class="d-block pt-2 pt-2 pb-2 px-3 font_12 bg-light">Target: <b>{{ (dt3['score_strip'][0]['score'].split('/')[0] | int) + 1 }}</b>&nbsp;&nbsp;&bull;&nbsp;&nbsp;Current RR: <b>{{ dt3['score_strip'][1]['run_rate'].split(' ')[2] }}</b>&nbsp;&nbsp;|&nbsp;&nbsp;Required RR: <b>{{ dt3['score_strip'][0]['required_run_rate'] }}</b><br>Current Partnership: <b>{{ dt3['innings'][1]['current_partnership']['runs'] }} ({{ dt3['innings'][1]['current_partnership']['balls'] }})</b></span>
               {% endif %}
             {% endif %}

        <ul class="mb-0 bg-tab rounded_bottom score_tab d-flex justify-content-evenly flex-wrap">
         <li class="d-inline-block"><a class="d-block" href="{{ url_for('main.matchInfo', match=match, source=source, fteam=fteam) }}">Info</a></li>
		 <li class="d-inline-block"><a class="active d-block" href="{{ url_for('main.liveScore', match=match, source=source, fteam=fteam) }}">Live</a></li>
		 <li class="d-inline-block"><a class="d-block" href="{{ url_for('main.scoreCard', match=match, source=source, fteam=fteam) }}">Scorecard</a></li>
         <li class="d-inline-block"><a class="d-block" href="{{ url_for('main.matchOvers', match=match, source=source, fteam=fteam) }}">Overs</a></li>
         <li class="d-inline-block"><a class="d-block" href="{{ url_for('main.liveSquad', match=match, source=source, fteam=fteam) }}">Squad</a></li>
		</ul>
	    </div>
          {% if 'won' not in dt3['info'] and 'abandoned' not in dt3['info'] | lower and 'no result' not in dt3['info'] | lower %}
          {% if 'team_win_probability' in dt3 %}
          {% if dt3['team_win_probability'].items() | length != 0 %}
          <div class="live_4 border rounded_10 bg-white mt-3 pt-3 pb-3">
              <div class="container1">
            <div class="label-container">
                <img src="{{ url_for('static', filename= 'images/squad_logos/'~(dt1[4]~('1' if dt1[4] == 'RR' else ''))~'.png') }}" width="40px" height="40px">
                <span><b>Win Probability %</b></span>
                <img src="{{ url_for('static', filename= 'images/squad_logos/'~(dt1[5]~('1' if dt1[5] == 'RR' else ''))~'.png') }}" width="40px" height="40px">
            </div>
            <div class="progress-bar">
                <div class="l-bar" style="--c: {{ clr[dt1[4]] }}; width: {{ (dt3['team_win_probability'][dt1[4]] | float) | round(0) | int }}%"></div>
                <div class="r-bar" style="--c: {{ clr[dt1[5]] }}; width: {{ (dt3['team_win_probability'][dt1[5]] | float) | round(0) | int }}%"></div>
            </div>
            <div class="text-container">
                <span style="color: {{ clr[dt1[4]] }};"><b>{{ (dt3['team_win_probability'][dt1[4]] | float) | round(0) | int }}%</b></span>
                <span style="color: {{ clr[dt1[5]] }};"><b>{{ (dt3['team_win_probability'][dt1[5]] | float) | round(0) | int }}%</b></span>
            </div>
            </div>
          </div>{% endif %}{% endif %}{% endif %}

      {% if 'won' in dt3['info'] %}
          {% if "player_of_match" in dt3 %}
          {% set result = find_player(dt3['player_of_match']['player_name'], sqf) %}
          {% set team = result[3] if result else "NA" %}
          {% set name = result[2] if result else dt3['player_of_match']['player_name'] %}
          <div class="score_2_inner border rounded_10 bg-white mt-3">
              <b class="bg-blue-grad font_18 d-block px-3 text-white text-center pt-2 pb-2 rounded_top">Player of the Match</b>
              <div class="potm-content">
                  <a href="{{ url_for('main.squad_details', team=team, name=name) }}">
                  <div class="potm-image" style="{% if team == 'RCB' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c1'] }} {% elif team == 'GT' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c2'] }} {% elif team == 'MI' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c2'] }}  {% elif team == 'PBKS' %} --c1: {{ clr2[team]['c2'] }}; --c2: {{ clr2[team]['c1'] }} {% elif team == 'KKR' %} --c1: {{ clr2[team]['c2'] }}; --c2: {{ clr2[team]['c3'] }} {% else %} --c1: {{ clr2[team]['c1'] }}; --c2: {{ clr2[team]['c2'] }} {% endif %};">
                      <img src="/static/images/squads/{{ team }}/{{ name.replace(' ', '-') }}.png" alt="{{ name }}">
                  </div></a>
                  <div class="potm-details">
                      <div class="potm-name"><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name }}</a></div>
                      <div class="potm-team fw-bold">
                          <img src="/static/images/squad_logos/{{ team }}{% if team == 'RR' %}1{% endif %}.png" alt="Team Logo" class="team-logo">
                          {{ fn[team] }}
                      </div>
                      <div class="potm-stats">
                          <div class="stat-item">
                              <div class="stat-label">Bat</div>
                              <div class="stat-value">{{ '-' if dt3['player_of_match']['batting_stat'] == '' else dt3['player_of_match']['batting_stat'] }}</div>
                          </div>
                          <div class="stat-item">
                              <div class="stat-label">Bowl</div>
                              <div class="stat-value">{{ '-' if dt3['player_of_match']['bowling_stat'] == '' else dt3['player_of_match']['bowling_stat'] }}</div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      {% endif %}{% endif %}

      {% if dt2[0] == "Final" %}
          {% if dt3['player_of_series']['player_name'] != "" %}
          {% set result = find_player(dt3['player_of_series']['player_name'], sqf) %}
          {% set team = result[3] if result else "NA" %}
          {% set name = result[2] if result else dt3['player_of_series']['player_name'] %}
          <div class="score_2_inner border rounded_10 bg-white mt-3">
              <b class="bg-blue-grad font_18 d-block px-3 text-white text-center pt-2 pb-2 rounded_top">Player of the Series</b>
              <div class="potm-content">
                  <a href="{{ url_for('main.squad_details', team=team, name=name) }}">
                  <div class="potm-image" style="{% if team == 'RCB' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c1'] }} {% elif team == 'GT' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c2'] }} {% elif team == 'MI' %} --c1: {{ clr2[team]['c3'] }}; --c2: {{ clr2[team]['c2'] }}  {% elif team == 'PBKS' %} --c1: {{ clr2[team]['c2'] }}; --c2: {{ clr2[team]['c1'] }} {% elif team == 'KKR' %} --c1: {{ clr2[team]['c2'] }}; --c2: {{ clr2[team]['c3'] }} {% else %} --c1: {{ clr2[team]['c1'] }}; --c2: {{ clr2[team]['c2'] }} {% endif %};">
                      <img src="/static/images/squads/{{ team }}/{{ name.replace(' ', '-') }}.png" alt="{{ name }}">
                  </div></a>
                  <div class="potm-details">
                      <div class="potm-name"><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name }}</a></div>
                      <div class="potm-team fw-bold">
                          <img src="/static/images/squad_logos/{{ team }}{% if team == 'RR' %}1{% endif %}.png" alt="Team Logo" class="team-logo">
                          {{ fn[team] }}
                      </div>
                  </div>
              </div>
          </div>
      {% endif %}{% endif %}
      
      {% if 'won' not in dt3['info'] and 'abandoned' not in dt3['info'] | lower and 'no result' not in dt3['info'] | lower %}
      {% if dt3['innings'] | length != 0 %}
		<div class="live_3 border rounded_10 bg-white mt-3" style="overflow: hidden;">
		  <div class="table-responsive">
		    <table class="table font_12 mb-0">
  <thead class="border-0">
    <tr class="bg-bluelight">
      <th class="text-muted" style="width: 55%;">BATTERS</th>
      <th class="px-2 text-muted">R</th>
      <th class="px-2 text-muted">B</th>
      <th class="px-2 text-muted">4s</th>
      <th class="px-2 text-muted">6s</th>
      <th class="px-2 text-muted">SR</th>
    </tr>
  </thead>
  <tbody>
  {% if dt3['now_batting']['b1']['name'] != "" %}
    <tr>
        {% set result = find_player(dt3['now_batting']['b1']['name'], sqf) %}
        {% set team = result[3] if result else "NA" %}
        {% set name = result[2] if result else dt3['now_batting']['b1']['name'] %}
        <td class="text-blue" style="text-wrap: nowrap;"><b><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name~'*' }}</a></b></td>
      <td class="px-2"><b>{{ dt3['now_batting']['b1']['stats']['runs'] }}</b></td>
      <td class="px-2">{{ dt3['now_batting']['b1']['stats']['balls'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b1']['stats']['fours'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b1']['stats']['sixes'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b1']['stats']['strike_rate'] }}</td>
    </tr>{% endif %}
  {% if dt3['now_batting']['b2']['name'] != "" %}
    <tr>
        {% set result = find_player(dt3['now_batting']['b2']['name'], sqf) %}
        {% set team = result[3] if result else "NA" %}
        {% set name = result[2] if result else dt3['now_batting']['b2']['name'] %}
        <td class="text-blue" style="text-wrap: nowrap;"><b><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name }}</a></b></td>
      <td class="px-2"><b>{{ dt3['now_batting']['b2']['stats']['runs'] }}</b></td>
      <td class="px-2">{{ dt3['now_batting']['b2']['stats']['balls'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b2']['stats']['fours'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b2']['stats']['sixes'] }}</td>
      <td class="px-2">{{ dt3['now_batting']['b2']['stats']['strike_rate'] }}</td>
    </tr>{% endif %}
    <tr class="bg-bluelight">
      <th class="text-muted" style="width: 55%;">BOWLERS</th>
      <th class="px-2 text-muted">O</th>
      <th class="px-2 text-muted">M</th>
      <th class="px-2 text-muted">R</th>
	  <th class="px-2 text-muted">W</th>
	  <th class="px-2 text-muted">ER</th>
    </tr>
    {% if dt3['now_bowling']['b1']['name'] != "" %}
	<tr>
        {% set result = find_player(dt3['now_bowling']['b1']['name'], sqf) %}
        {% set team = result[3] if result else "NA" %}
        {% set name = result[2] if result else dt3['now_bowling']['b1']['name'] %}
        <td class="text-blue" style="text-wrap: nowrap;"><b><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name~'*' }}</a></b></td>
      <td class="px-2">{{ dt3['now_bowling']['b1']['stats']['overs'] }}</td>
      <td class="px-2">{{ dt3['now_bowling']['b1']['stats']['maiden_overs'] }}</td>
      <td class="px-2">{{ dt3['now_bowling']['b1']['stats']['runs'] }}</td>
	  <td class="px-2"><b>{{ dt3['now_bowling']['b1']['stats']['wickets'] }}</b></td>
	  <td class="px-2">{{ dt3['now_bowling']['b1']['stats']['economy'] }}</td>
    </tr>{% endif %}
    {% if dt3['now_bowling']['b2']['name'] != "" %}
	<tr>
        {% set result = find_player(dt3['now_bowling']['b2']['name'], sqf) %}
        {% set team = result[3] if result else "NA" %}
        {% set name = result[2] if result else dt3['now_bowling']['b2']['name'] %}
        <td class="text-blue" style="text-wrap: nowrap;"><b><a href="{{ url_for('main.squad_details', team=team, name=name) }}">{{ name }}</a></b></td>
      <td class="px-2">{{ dt3['now_bowling']['b2']['stats']['overs'] }}</td>
      <td class="px-2">{{ dt3['now_bowling']['b2']['stats']['maiden_overs'] }}</td>
      <td class="px-2">{{ dt3['now_bowling']['b2']['stats']['runs'] }}</td>
	  <td class="px-2"><b>{{ dt3['now_bowling']['b2']['stats']['wickets'] }}</b></td>
	  <td class="px-2">{{ dt3['now_bowling']['b2']['stats']['economy'] }}</td>
    </tr>{% endif %}
  </tbody>
</table>
		  </div>
		</div>
      {% endif %}{% endif %}

    <div class="score_1 mt-3">
		  <ul class="d-flex flex-wrap font_12 fw-bold nav nav-tabs border-0" id="inningsTabs">
        {% for i in dt3['innings'][:2] %}
	   {% set is_active = dt3['score_strip'][loop.index0]['currently_batting'] %}
        <li class="me-2 mt-1 mb-1"><a class="border_orange d-block p-1 px-3 rounded-pill {% if is_active %}active{% endif %}" data-bs-toggle="tab" aria-expanded="true"  href="#profile{{ loop.index }}">{{ tid[i['batting_team_id']][1] }} Innings <i class="fa fa-chevron-right font_10 ms-1"></i></a></li>
        {% endfor %}
          </ul>
		</div>

    <div class="tab-content">
    {% set is_active = dt3['score_strip'][1]['currently_batting'] %}
    <div class="tab-pane {% if is_active %}active{% endif %}" id="profile2">
		<div class="live_4 border rounded_10 overflow-hidden bg-white mt-3">
    {% if inn2['inning'] %}
    {% for over in inn2['inning']['overs'][:-1] %}
    {% for ball in over['balls'] %}
    {% if ball['comments'][0]['commentTypeId'] == 'EndOfOver' %}
    <div class="d-flex gap-3 px-3 py-2" style="border-bottom: 1px solid #d9d9d9; background: #d9d9d9;">
      <div class="d-flex flex-column gap-1 align-items-center" style="width: 20%;">
      <div class="font_14 fw-bold text-center">
        OVER {{ over['overNumber'] }}
      </div>
      <div class="font_13 text-center">
        {{ tid[dt3['score_strip'][1].team_id][0] }}<br>
        {{ over['totalInningRuns'] }}/{{ over['totalInningWickets'] }}
      </div>
      </div>
      <div class="d-flex flex-column gap-1" style="width: 80%;">
      <div class="font_13 border-bottom pb-1">
      {% for bl in over['balls'][::-1] %}
      {% set score = get_ball_score(bl) %}
      {{ score }}&nbsp;
      {% endfor %}
      &nbsp;=>&nbsp;<b>{{ get_runs(over) }} Runs</b>
      </div>
      <div class="font_13">
        Bowler: <b>{{ over['balls'][0]['comments'][0]['message'].split('Bowler: ')[1].split('.')[0] }}</b>
      </div>
      <div class="font_13">
        Batsmen: <b>{{ get_batsmen(over) }}</b>
      </div>
      </div>
    </div>
    {% endif %}
    <div class="d-flex gap-3 px-3 py-2" style="border-bottom: 1px solid #d9d9d9;">
      <div class="d-flex flex-column gap-2 align-items-center">
      <div class="font_14 fw-bold text-center">
        {{ over['overNumber'] - 1 }}.{{ ball['ballNumber'] }}
      </div>
      {% set score = get_ball_score(ball) %}
      <div class="over-right-balls {{ get_ball_bg_color(score) }}" style="width: {{ 20+(score|length * 4) }}px;">{{ score }}</div>
      </div>
      <div class="font_14">
        {{ ball['comments'][-1]['message'] | bold_substring | safe}}
      </div>
    </div>
    {% endfor %}
    {% endfor %}
    {% endif %}</div></div>

    {% set is_active = dt3['score_strip'][0]['currently_batting'] %}
    <div class="tab-pane {% if is_active %}active{% endif %}" id="profile1">
    <div class="live_4 border rounded_10 overflow-hidden bg-white mt-3">
    {% if inn1['inning'] %}
    {% for over in inn1['inning']['overs'][:-1] %}
    {% for ball in over['balls'] %}
    {% if ball['comments'][0]['commentTypeId'] == 'EndOfOver' %}
    <div class="d-flex gap-3 px-3 py-2" style="border-bottom: 1px solid #d9d9d9; background: #d9d9d9;">
      <div class="d-flex flex-column gap-1 align-items-center" style="width: 20%;">
      <div class="font_14 fw-bold text-center">
        OVER {{ over['overNumber'] }}
      </div>
      <div class="font_13 text-center">
        {{ tid[dt3['score_strip'][0].team_id][0] }}<br>
        {{ over['totalInningRuns'] }}/{{ over['totalInningWickets'] }}
      </div>
      </div>
      <div class="d-flex flex-column gap-1" style="width: 80%;">
      <div class="font_13 border-bottom pb-1">
      {% for bl in over['balls'][::-1] %}
      {% set score = get_ball_score(bl) %}
      {{ score }}&nbsp;
      {% endfor %}
      &nbsp;=>&nbsp;<b>{{ get_runs(over) }} Runs</b>
      </div>
      <div class="font_13">
        Bowler: <b>{{ over['balls'][0]['comments'][0]['message'].split('Bowler: ')[1].split('.')[0] }}</b>
      </div>
      <div class="font_13">
        Batsmen: <b>{{ get_batsmen(over) }}</b>
      </div>
      </div>
    </div>
    {% endif %}
    <div class="d-flex gap-3 px-3 py-2" style="border-bottom: 1px solid #d9d9d9;">
      <div class="d-flex flex-column gap-2 align-items-center">
      <div class="font_14 fw-bold text-center">
        {{ over['overNumber'] - 1 }}.{{ ball['ballNumber'] }}
      </div>
      {% set score = get_ball_score(ball) %}
      <div class="over-right-balls {{ get_ball_bg_color(score) }}" style="width: {{ 20+(score|length * 4) }}px;">{{ score }}</div>
      </div>
      <div class="font_14">
        {{ ball['comments'][-1]['message'] | bold_substring | safe}}
      </div>
    </div>
    {% endfor %}
    {% endfor %}
    {% endif %}
		</div>
	  </div>
    </div>
    </div>
	</div>
   </div>
 </div>
</section>

<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/theme.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()
</script>
<script>
      // Function to create a timer for a given clock element
      function createTimer(clockElement) {
      const deadline = new Date(clockElement.getAttribute("data-deadline")).getTime();

      const daysSpan = clockElement.querySelector(".days");
      const hoursSpan = clockElement.querySelector(".hours");
      const minutesSpan = clockElement.querySelector(".minutes");
      const secondsSpan = clockElement.querySelector(".seconds");

      const interval = setInterval(function () {
        const Tnow = new Date();
        const timeZone = 'Asia/Kolkata';
        const dateInTimeZone = new Date(Tnow.toLocaleString('en-US', { timeZone }));
        const now = dateInTimeZone.getTime();
        const t = deadline - now;

        if (t < 0) {
          clearInterval(interval);
          daysSpan.textContent = "0";
          hoursSpan.textContent = "0";
          minutesSpan.textContent = "0";
          secondsSpan.textContent = "0";
          return;
        }

        const days = Math.floor(t / (1000 * 60 * 60 * 24));
        const hours = Math.floor((t % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((t % (1000 * 60)) / 1000);

        daysSpan.textContent = days;
        hoursSpan.textContent = hours;
        minutesSpan.textContent = minutes;
        secondsSpan.textContent = seconds;
      }, 1000);
    }

    // Initialize timers for all clock elements
    document.querySelectorAll(".clockdiv").forEach(function(clockElement) {
  createTimer(clockElement); // This will start the timer instantly
});
</script>
{% if source == 'displayFR' %}
  <a href="{{ url_for('main.displayFR', fteam=fteam) }}" class="floating-back-btn" title="Back to Fixtures">
    <i class="fa fa-arrow-left"></i>
  </a>
{% elif source == 'liveMatches' %}
  <a href="{{ url_for('main.todayMatch') }}" class="floating-back-btn" title="Back to Live Matches">
    <i class="fa fa-arrow-left"></i>
  </a>
{% endif %}
{% endblock %}
